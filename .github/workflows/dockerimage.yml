name: Docker Image CI
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Default JDKs
      uses: elgohr/Publish-Docker-Github-Action@f7aca2fea76a5218f3c76cd5933c3ba1d8008774
      with:
        name: junit-team/build
        registry: ghcr.io
        username: junit-buildmaster
        password: ${{ secrets.CR_PAT }}
        workdir: base
        tags: "latest,16"
    - name: Plus JDK 17
      uses: elgohr/Publish-Docker-Github-Action@f7aca2fea76a5218f3c76cd5933c3ba1d8008774
      env:
        ADDITIONAL_JDK_VERSION: 17.ea.13-open
      with:
        name: junit-team/build:17
        registry: ghcr.io
        username: ${{ github.actor }}
        password: ${{ secrets.GITHUB_TOKEN }}
        workdir: extended
        buildargs: ADDITIONAL_JDK_VERSION
